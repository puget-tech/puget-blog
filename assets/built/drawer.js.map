{"version":3,"sources":["drawer.js"],"names":["factory","define","amd","exports","module","require","jQuery","$","namespace","touches","document","ontouchstart","__","init","options","extend","iscroll","mouseWheel","preventDefault","showOverlay","settings","state","events","opened","closed","dropdownEvents","class","nav","toggle","overlay","open","close","dropdown","this","each","_this","$this","data","refresh","call","addOverlay","on","iScroll","window","IScroll","$overlay","addClass","append","event","removeClass","css","overflow","drawerCallback","trigger","off","destroy","removeData","find","remove","fn","callback","end","drawer","method","apply","Array","prototype","slice","arguments","error"],"mappings":"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","file":"drawer.js","sourcesContent":[";(function umd(factory) {\r\n  'use strict';\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(['jquery'], factory);\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = factory(require('jquery'));\r\n  } else {\r\n    factory(jQuery);\r\n  }\r\n}(function Drawer($) {\r\n  'use strict';\r\n  var namespace = 'drawer';\r\n  var touches = typeof document.ontouchstart != 'undefined';\r\n  var __ = {\r\n    init: function init(options) {\r\n      options = $.extend({\r\n        iscroll: {\r\n          mouseWheel: true,\r\n          preventDefault: false\r\n        },\r\n        showOverlay: true\r\n      }, options);\r\n\r\n      __.settings = {\r\n        state: false,\r\n        events: {\r\n          opened: 'drawer.opened',\r\n          closed: 'drawer.closed'\r\n        },\r\n        dropdownEvents: {\r\n          opened: 'shown.bs.dropdown',\r\n          closed: 'hidden.bs.dropdown'\r\n        }\r\n      };\r\n\r\n      __.settings.class = $.extend({\r\n        nav: 'drawer-nav',\r\n        toggle: 'drawer-toggle',\r\n        overlay: 'drawer-overlay',\r\n        open: 'drawer-open',\r\n        close: 'drawer-close',\r\n        dropdown: 'drawer-dropdown'\r\n      }, options.class);\r\n\r\n      return this.each(function instantiateDrawer() {\r\n        var _this = this;\r\n        var $this = $(this);\r\n        var data = $this.data(namespace);\r\n\r\n        if (!data) {\r\n          options = $.extend({}, options);\r\n          $this.data(namespace, { options: options });\r\n\r\n          __.refresh.call(_this);\r\n\r\n          if (options.showOverlay) {\r\n            __.addOverlay.call(_this);\r\n          }\r\n\r\n          $('.' + __.settings.class.toggle).on('click.' + namespace, function toggle() {\r\n            __.toggle.call(_this);\r\n            return _this.iScroll.refresh();\r\n          });\r\n\r\n          $(window).on('resize.' + namespace, function close() {\r\n            __.close.call(_this);\r\n            return _this.iScroll.refresh();\r\n          });\r\n\r\n          $('.' + __.settings.class.dropdown)\r\n            .on(__.settings.dropdownEvents.opened + ' ' + __.settings.dropdownEvents.closed, function onOpenedOrClosed() {\r\n              return _this.iScroll.refresh();\r\n            });\r\n        }\r\n\r\n      }); // end each\r\n    },\r\n\r\n    refresh: function refresh() {\r\n      this.iScroll = new IScroll(\r\n        '.' + __.settings.class.nav,\r\n        $(this).data(namespace).options.iscroll\r\n      );\r\n    },\r\n\r\n    addOverlay: function addOverlay() {\r\n      var $this = $(this);\r\n      var $overlay = $('<div>').addClass(__.settings.class.overlay + ' ' + __.settings.class.toggle);\r\n\r\n      return $this.append($overlay);\r\n    },\r\n\r\n    toggle: function toggle() {\r\n      var _this = this;\r\n\r\n      if (__.settings.state) {\r\n        return __.close.call(_this);\r\n      } else {\r\n        return __.open.call(_this);\r\n      }\r\n    },\r\n\r\n    open: function open() {\r\n      var $this = $(this);\r\n\r\n      if (touches) {\r\n        $this.on('touchmove.' + namespace, function disableTouch(event) {\r\n          event.preventDefault();\r\n        });\r\n      }\r\n\r\n      return $this\r\n        .removeClass(__.settings.class.close)\r\n        .addClass(__.settings.class.open)\r\n        .css({ 'overflow': 'hidden' })\r\n        .drawerCallback(function triggerOpenedListeners() {\r\n          __.settings.state = true;\r\n          $this.trigger(__.settings.events.opened);\r\n        });\r\n    },\r\n\r\n    close: function close() {\r\n      var $this = $(this);\r\n\r\n      if (touches) $this.off('touchmove.' + namespace);\r\n\r\n      return $this\r\n        .removeClass(__.settings.class.open)\r\n        .addClass(__.settings.class.close)\r\n        .css({ 'overflow': 'auto' })\r\n        .drawerCallback(function triggerClosedListeners() {\r\n          __.settings.state = false;\r\n          $this.trigger(__.settings.events.closed);\r\n        });\r\n    },\r\n\r\n    destroy: function destroy() {\r\n      return this.each(function destroyEach() {\r\n        var _this = this;\r\n        var $this = $(this);\r\n        $('.' + __.settings.class.toggle).off('click.' + namespace);\r\n        $(window).off('resize.' + namespace);\r\n        $('.' + __.settings.class.dropdown).off(__.settings.dropdownEvents.opened + ' ' + __.settings.dropdownEvents.closed);\r\n        _this.iScroll.destroy();\r\n        $this\r\n          .removeData(namespace)\r\n          .find('.' + __.settings.class.overlay)\r\n          .remove();\r\n      });\r\n    }\r\n\r\n  };\r\n\r\n  $.fn.drawerCallback = function drawerCallback(callback) {\r\n    var end = 'transitionend webkitTransitionEnd';\r\n    return this.each(function setAnimationEndHandler() {\r\n      var $this = $(this);\r\n      $this.on(end, function invokeCallbackOnAnimationEnd() {\r\n        $this.off(end);\r\n        return callback.call(this);\r\n      });\r\n    });\r\n  };\r\n\r\n  $.fn.drawer = function drawer(method) {\r\n    if (__[method]) {\r\n      return __[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n    } else if (typeof method === 'object' || !method) {\r\n      return __.init.apply(this, arguments);\r\n    } else {\r\n      $.error('Method ' + method + ' does not exist on jQuery.' + namespace);\r\n    }\r\n  };\r\n\r\n}));\r\n"],"sourceRoot":"/source/"}